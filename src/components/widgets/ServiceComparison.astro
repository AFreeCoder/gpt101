---
import WidgetWrapper from '~/components/ui/WidgetWrapper.astro';

interface Props {
  id?: string;
  isDark?: boolean;
  classes?: Record<string, string>;
  bg?: string;
}

const {
  id,
  isDark = false,
  classes = {},
  bg = await Astro.slots.render('bg'),
} = Astro.props;

// 对比数据
const comparisonData = [
  { feature: '网络要求', mirror: '国内直连', plus: '需科学上网', highlight: 'network' },
  { feature: '使用限制', mirror: '无限制', plus: '3小时40次', highlight: 'limit' },
  { feature: '价格对比', mirror: '¥5/天，¥25/周，¥58/月', plus: '¥144/月', highlight: 'price' },
  { feature: 'GPT5、o3、4o等', mirror: true, plus: true },
  { feature: 'GPTs商店', mirror: true, plus: true },
  { feature: '高级语音模式', mirror: true, plus: true },
  { feature: ' GPT-4o 画图', mirror: true, plus: true },
  { feature: '独享账号', mirror: true, plus: true },
  { feature: '网页端登录', mirror: true, plus: true },
  { feature: 'APP登录', mirror: false, plus: true, note: '仅网页端' },
];
---

<WidgetWrapper id={id} isDark={isDark} containerClass={`max-w-6xl ${classes?.container ?? ''}`} bg={bg}>
  <div class="text-center mb-12">
    <h2 class="text-3xl md:text-4xl font-bold text-gray-800 mb-4">
      📊 ChatGPT 镜像 VS 官网 Plus 功能对比
    </h2>
    <p class="text-lg text-gray-600">功能对比一目了然，选择最适合你的方案</p>
  </div>

  <!-- 对比表格 -->
  <div class="bg-white rounded-2xl shadow-lg border border-gray-100 overflow-hidden">
    <div class="overflow-x-auto">
      <table class="w-full">
        <!-- 表头 -->
        <thead class="bg-gray-50">
          <tr>
            <th class="px-6 py-4 text-left text-lg font-bold text-gray-800 w-1/3">功能</th>
            <th class="px-6 py-4 text-center text-lg font-bold text-green-600 w-1/3">镜像服务</th>
            <th class="px-6 py-4 text-center text-lg font-bold text-blue-600 w-1/3">Plus会员</th>
          </tr>
        </thead>

        <!-- 表格内容 -->
        <tbody class="divide-y divide-gray-200">
          {comparisonData.map((item, index) => {
            let rowClass = 'hover:bg-gray-50 transition-colors';
            let featureClass = 'text-gray-800';

            if (item.highlight === 'network') {
              rowClass = 'bg-blue-50 border-blue-200 hover:bg-blue-100 transition-colors';
              featureClass = 'text-blue-800 font-semibold';
            } else if (item.highlight === 'limit') {
              rowClass = 'bg-green-50 border-green-200 hover:bg-green-100 transition-colors';
              featureClass = 'text-green-800 font-semibold';
            } else if (item.highlight === 'price') {
              rowClass = 'bg-yellow-50 border-yellow-200 hover:bg-yellow-100 transition-colors border-2';
              featureClass = 'text-yellow-800 font-bold';
            }

            return (
              <tr class={rowClass}>
              <!-- 功能名称 -->
              <td class={`px-6 py-4 font-medium ${featureClass}`}>
                {item.highlight && (
                  <span class="mr-2">
                    {item.highlight === 'network' && '🌐'}
                    {item.highlight === 'limit' && '⚡'}
                    {item.highlight === 'price' && '💰'}
                  </span>
                )}
                {item.feature}
              </td>

              <!-- 镜像服务 -->
              <td class="px-6 py-4 text-center">
                {typeof item.mirror === 'boolean' ? (
                  item.mirror ? (
                    <span class="inline-flex items-center justify-center w-6 h-6 bg-green-100 rounded-full">
                      <svg class="w-4 h-4 text-green-600" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"></path>
                      </svg>
                    </span>
                  ) : (
                    <div class="text-center">
                      <span class="inline-flex items-center justify-center w-6 h-6 bg-red-100 rounded-full">
                        <svg class="w-4 h-4 text-red-600" fill="currentColor" viewBox="0 0 20 20">
                          <path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd"></path>
                        </svg>
                      </span>
                      {item.note && <div class="text-xs text-gray-500 mt-1">{item.note}</div>}
                    </div>
                  )
                ) : (
                  <span class={`text-sm font-medium ${
                    item.highlight === 'network' ? 'text-green-700 font-bold bg-green-100 px-3 py-1 rounded-full' :
                    item.highlight === 'limit' ? 'text-green-700 font-bold bg-green-100 px-3 py-1 rounded-full' :
                    item.highlight === 'price' ? 'text-green-700 font-bold bg-green-100 px-3 py-1 rounded-full' :
                    'text-gray-700'
                  }`}>
                    {item.mirror}
                  </span>
                )}
              </td>

              <!-- Plus会员 -->
              <td class="px-6 py-4 text-center">
                {typeof item.plus === 'boolean' ? (
                  item.plus ? (
                    <span class="inline-flex items-center justify-center w-6 h-6 bg-green-100 rounded-full">
                      <svg class="w-4 h-4 text-green-600" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"></path>
                      </svg>
                    </span>
                  ) : (
                    <span class="inline-flex items-center justify-center w-6 h-6 bg-red-100 rounded-full">
                      <svg class="w-4 h-4 text-red-600" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd"></path>
                      </svg>
                    </span>
                  )
                ) : (
                  <span class={`text-sm font-medium ${
                    item.highlight === 'network' ? 'text-red-700 font-bold bg-red-100 px-3 py-1 rounded-full' :
                    item.highlight === 'limit' ? 'text-red-700 font-bold bg-red-100 px-3 py-1 rounded-full' :
                    item.highlight === 'price' ? 'text-red-700 font-bold bg-red-100 px-3 py-1 rounded-full' :
                    'text-gray-700'
                  }`}>
                    {item.plus}
                  </span>
                )}
              </td>
            </tr>
            );
          })}
        </tbody>
      </table>
    </div>
  </div>

  <!-- 底部说明 -->
  <div class="mt-8 text-center">
    <div class="inline-flex items-center gap-3 bg-blue-50 border border-blue-200 rounded-xl px-6 py-4">
      <div class="w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center">
        <span class="text-blue-600 text-lg">💡</span>
      </div>
      <p class="text-blue-800 font-medium">
        镜像服务适合需要国内直连、高频使用的用户；Plus会员适合需要完整移动端体验的用户
      </p>
    </div>
  </div>
</WidgetWrapper>