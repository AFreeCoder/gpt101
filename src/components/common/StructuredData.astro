---
/**
 * 结构化数据组件 (Schema.org JSON-LD)
 * 用于提升SEO效果和Google富媒体搜索结果
 */

export interface Props {
  type?: 'product' | 'faq' | 'all';
}

const { type = 'all' } = Astro.props;
const siteUrl = Astro.site?.toString() || 'https://gpt101.org';

// Product Schema - ChatGPT Plus充值服务
const productSchema = {
  '@context': 'https://schema.org',
  '@type': 'Product',
  name: 'ChatGPT Plus 充值服务',
  description:
    'ChatGPT Plus代充服务 - 无需海外信用卡，正规iOS充值渠道，1分钟完成充值，失败100%退款。支持GPT-5 全部模型、GPTs商店、DALL-E 3等全功能，24/7自动处理，微信支付宝支付便捷安全',
  image: `${siteUrl}_astro/default.CZ816Hke_2bosb5.jpg`,
  brand: {
    '@type': 'Brand',
    name: 'ChatGPT 一站式服务',
  },
  offers: {
    '@type': 'Offer',
    price: '150~184',
    priceCurrency: 'CNY',
    availability: 'https://schema.org/InStock',
    url: siteUrl,
    priceValidUntil: '2026-12-31',
    itemCondition: 'https://schema.org/NewCondition',
  },
  aggregateRating: {
    '@type': 'AggregateRating',
    ratingValue: '4.8',
    reviewCount: '258',
    bestRating: '5',
    worstRating: '1',
  },
  review: [
    {
      '@type': 'Review',
      reviewRating: {
        '@type': 'Rating',
        ratingValue: '5',
        bestRating: '5',
      },
      author: {
        '@type': 'Person',
        name: '@岸上的漂流瓶',
      },
      reviewBody: '售后很给力，充值速度很快，我会推荐给朋友！',
    },
    {
      '@type': 'Review',
      reviewRating: {
        '@type': 'Rating',
        ratingValue: '5',
        bestRating: '5',
      },
      author: {
        '@type': 'Person',
        name: '@独倚高楼',
      },
      reviewBody: '充值很快，还帮忙解决了网络问题，售后十分给力！',
    },
  ],
};

// FAQPage Schema - 常见问题
const faqSchema = {
  '@context': 'https://schema.org',
  '@type': 'FAQPage',
  mainEntity: [
    {
      '@type': 'Question',
      name: 'ChatGPT Plus充值服务安全吗？会不会影响我的账户？',
      acceptedAnswer: {
        '@type': 'Answer',
        text: '我们的ChatGPT Plus充值服务采用iOS正规代充技术，通过苹果官方订阅渠道直接向ChatGPT账户充值，不留后门，完全安全。使用正规Apple账户充值通道，全自动化充值技术，确保ChatGPT Plus充值过程中账户安全和服务稳定，已稳定运行2年。',
      },
    },
    {
      '@type': 'Question',
      name: 'ChatGPT Plus充值失败怎么办？',
      acceptedAnswer: {
        '@type': 'Answer',
        text: '如果遇到ChatGPT Plus充值失败的情况，我们承诺100%当天退款。请立即联系客服QQ：2316149029，我们会第一时间为您处理ChatGPT Plus充值问题或办理退款。',
      },
    },
    {
      '@type': 'Question',
      name: 'ChatGPT Plus充值价格为什么和官方不一致？',
      acceptedAnswer: {
        '@type': 'Answer',
        text: '受ChatGPT在不同地区的价格策略、汇率以及渠道成本影响，ChatGPT Plus充值价格偶尔会有波动，请以最新充值价格为准。我们的ChatGPT Plus充值服务完全正规，通过苹果官方通道完成订阅，充值后享受与官方相同的ChatGPT Plus全部功能和权限。',
      },
    },
    {
      '@type': 'Question',
      name: 'ChatGPT Plus充值需要多长时间？',
      acceptedAnswer: {
        '@type': 'Answer',
        text: '我们提供24/7自动处理的ChatGPT Plus充值服务。购买卡密后，整个ChatGPT Plus充值流程通常在1-3分钟内完成。极少数情况下可能需要10-20分钟，这是目前市面上最快的ChatGPT Plus充值方式之一。',
      },
    },
    {
      '@type': 'Question',
      name: 'ChatGPT Plus充值支持哪些支付方式？',
      acceptedAnswer: {
        '@type': 'Answer',
        text: '我们的ChatGPT Plus充值服务支持微信支付和支付宝支付，方便快捷。购买流程简单，支付完成后即可获得卡密，然后按照指引在1分钟内完成ChatGPT Plus充值流程，无需海外信用卡。',
      },
    },
    {
      '@type': 'Question',
      name: '如何选择ChatGPT Plus充值还是镜像服务？',
      acceptedAnswer: {
        '@type': 'Answer',
        text: '深度使用ChatGPT且有网络条件的用户建议选择ChatGPT Plus充值服务，享受完整的ChatGPT Plus功能；无网络条件或中度使用ChatGPT的用户可选择镜像服务，性价比更高，页面和功能与ChatGPT Plus完全一致，国内可直连使用。',
      },
    },
  ],
};

// WebSite Schema - 网站信息
const websiteSchema = {
  '@context': 'https://schema.org',
  '@type': 'WebSite',
  name: 'ChatGPT 一站式服务',
  url: siteUrl,
  description: '专业的ChatGPT Plus代充和镜像服务提供商',
  potentialAction: {
    '@type': 'SearchAction',
    target: {
      '@type': 'EntryPoint',
      urlTemplate: `${siteUrl}?s={search_term_string}`,
    },
    'query-input': 'required name=search_term_string',
  },
};

// 根据type参数决定输出哪些schema
const schemas = [];
if (type === 'product' || type === 'all') {
  schemas.push(productSchema);
}
if (type === 'faq' || type === 'all') {
  schemas.push(faqSchema);
}
if (type === 'all') {
  schemas.push(websiteSchema);
}
---

{
  schemas.map((schema) => (
    <script type="application/ld+json" set:html={JSON.stringify(schema)} />
  ))
}
