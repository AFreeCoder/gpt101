---
/**
 * 结构化数据组件 (Schema.org JSON-LD)
 * 用于提升SEO效果和Google富媒体搜索结果
 */

export interface Props {
  type?: 'product' | 'faq' | 'all';
}

const { type = 'all' } = Astro.props;
const siteUrl = (Astro.site?.toString() || 'https://gpt101.org').replace(/\/$/, ''); // 移除尾部斜杠

// Organization Schema - 组织信息（用于搜索结果显示 logo）
const organizationSchema = {
  '@context': 'https://schema.org',
  '@type': 'Organization',
  name: 'GPT101',
  url: siteUrl,
  logo: `${siteUrl}/favicon.png`,
  description: '一站式 GPT 充值服务 - 专业的 GPT Plus 代充和镜像服务平台',
  sameAs: [
    // 可以添加社交媒体链接
  ],
};

// Product Schema - GPT Plus充值服务
const productSchema = {
  '@context': 'https://schema.org',
  '@type': 'Product',
  name: 'GPT Plus 充值服务',
  description:
    'GPT Plus 代充服务 - 无需海外信用卡，合规iOS充值渠道，通常1-2分钟完成充值，符合条件可退款。支持 GPT-5 等模型、GPTs商店、DALL-E 3等功能，多数时段自动处理，微信支付宝支付便捷安全',
  image: `${siteUrl}/_astro/default.CZ816Hke_2bosb5.jpg`,
  brand: {
    '@type': 'Brand',
    name: 'GPT101',
  },
};

// FAQPage Schema - 常见问题
const faqSchema = {
  '@context': 'https://schema.org',
  '@type': 'FAQPage',
  mainEntity: [
    {
      '@type': 'Question',
      name: '没有海外信用卡可以充值吗？',
      acceptedAnswer: {
        '@type': 'Answer',
        text: '可以。我们的服务专为国内用户设计，无需海外信用卡，使用支付宝或微信支付即可完成充值。采用合规iOS充值渠道，通过平台订阅系统完成充值。',
      },
    },
    {
      '@type': 'Question',
      name: '充值过程需要提供账号密码吗？',
      acceptedAnswer: {
        '@type': 'Answer',
        text: '不需要！整个充值流程无需提供 GPT 账号密码，完全保护您的账户安全和隐私。您只需使用我们提供的充值卡密，按照简单步骤操作即可完成充值，全程不涉及账号密码信息。',
      },
    },
    {
      '@type': 'Question',
      name: '充值需要多长时间？会很复杂吗？',
      acceptedAnswer: {
        '@type': 'Answer',
        text: '流程简单。购买卡密后，按教程操作通常在1-2分钟内完成充值。我们提供详细图文教程，多数时段自动处理。',
      },
    },
    {
      '@type': 'Question',
      name: '如果充值失败会怎么样？',
      acceptedAnswer: {
        '@type': 'Answer',
        text: '如遇充值失败或服务未交付等情况，我们会按退款政策处理并尽快发起退款，原路退回时间以支付平台为准。如有问题，联系客服QQ：2316149029。',
      },
    },
    {
      '@type': 'Question',
      name: '充值后会不会被封号？如果封号怎么办？',
      acceptedAnswer: {
        '@type': 'Answer',
        text: '我们不承诺绝对不会封号。充值完成后账号使用状态以第三方平台规则为准。若确因充值服务导致账号异常，我们将协助核查并按退款政策处理。',
      },
    },
    {
      '@type': 'Question',
      name: '可以开发票吗？',
      acceptedAnswer: {
        '@type': 'Answer',
        text: '可以开具发票。如需发票，请在购买后联系客服QQ：2316149029，提供相关开票信息（公司名称、税号等），我们会为您办理发票开具事宜。',
      },
    },
    {
      '@type': 'Question',
      name: '如何选择 GPT Plus 充值还是镜像服务？',
      acceptedAnswer: {
        '@type': 'Answer',
        text: '深度使用且网络条件良好的用户可选择 Plus 充值服务；网络条件受限或中度使用的用户可选择镜像服务，国内网络可用，体验更轻量便捷。',
      },
    },
  ],
};

// WebSite Schema - 网站信息
const websiteSchema = {
  '@context': 'https://schema.org',
  '@type': 'WebSite',
  name: 'GPT101',
  url: siteUrl,
  description: '一站式 GPT 充值服务 - 专业的 GPT Plus 代充和镜像服务平台',
  // 移除 SearchAction 以避免生成 ?s= 格式的 URL
};

// 根据type参数决定输出哪些schema
const schemas: Array<Record<string, unknown>> = [];
// Organization schema 始终输出（用于搜索结果 logo）
schemas.push(organizationSchema);

if (type === 'product' || type === 'all') {
  schemas.push(productSchema);
}
if (type === 'faq' || type === 'all') {
  schemas.push(faqSchema);
}
if (type === 'all') {
  schemas.push(websiteSchema);
}
---

{schemas.map((schema) => <script type="application/ld+json" is:inline set:html={JSON.stringify(schema)} />)}
