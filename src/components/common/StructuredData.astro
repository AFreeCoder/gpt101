---
/**
 * 结构化数据组件 (Schema.org JSON-LD)
 * 用于提升SEO效果和Google富媒体搜索结果
 */

export interface Props {
  type?: 'product' | 'faq' | 'all';
}

const { type = 'all' } = Astro.props;
const siteUrl = Astro.site?.toString() || 'https://gpt101.org';

// Product Schema - ChatGPT Plus充值服务
const productSchema = {
  '@context': 'https://schema.org',
  '@type': 'Product',
  name: 'ChatGPT Plus 充值服务',
  description:
    'ChatGPT Plus代充服务 - 无需海外信用卡，正规iOS充值渠道，1分钟完成充值，失败100%退款。支持GPT-5 全部模型、GPTs商店、DALL-E 3等全功能，24/7自动处理，微信支付宝支付便捷安全',
  image: `${siteUrl}_astro/default.CZ816Hke_2bosb5.jpg`,
  brand: {
    '@type': 'Brand',
    name: 'ChatGPT 一站式服务',
  },
  offers: {
    '@type': 'Offer',
    price: '150~184',
    priceCurrency: 'CNY',
    availability: 'https://schema.org/InStock',
    url: siteUrl,
    priceValidUntil: '2026-12-31',
    itemCondition: 'https://schema.org/NewCondition',
  },
  aggregateRating: {
    '@type': 'AggregateRating',
    ratingValue: '4.8',
    reviewCount: '258',
    bestRating: '5',
    worstRating: '1',
  },
  review: [
    {
      '@type': 'Review',
      reviewRating: {
        '@type': 'Rating',
        ratingValue: '5',
        bestRating: '5',
      },
      author: {
        '@type': 'Person',
        name: '@岸上的漂流瓶',
      },
      reviewBody: '售后很给力，充值速度很快，我会推荐给朋友！',
    },
    {
      '@type': 'Review',
      reviewRating: {
        '@type': 'Rating',
        ratingValue: '5',
        bestRating: '5',
      },
      author: {
        '@type': 'Person',
        name: '@独倚高楼',
      },
      reviewBody: '充值很快，还帮忙解决了网络问题，售后十分给力！',
    },
  ],
};

// FAQPage Schema - 常见问题
const faqSchema = {
  '@context': 'https://schema.org',
  '@type': 'FAQPage',
  mainEntity: [
    {
      '@type': 'Question',
      name: '没有海外信用卡可以充值吗？',
      acceptedAnswer: {
        '@type': 'Answer',
        text: '完全可以！我们的服务专为国内用户设计，无需任何海外信用卡，使用支付宝或微信支付即可完成充值。采用正规iOS充值渠道，通过苹果官方订阅系统完成充值，安全便捷。',
      },
    },
    {
      '@type': 'Question',
      name: '充值过程需要提供账号密码吗？',
      acceptedAnswer: {
        '@type': 'Answer',
        text: '不需要！整个充值流程无需提供ChatGPT账号密码，完全保护您的账户安全和隐私。您只需使用我们提供的充值卡密，按照简单步骤操作即可完成充值，全程不涉及账号密码信息。',
      },
    },
    {
      '@type': 'Question',
      name: '充值需要多长时间？会很复杂吗？',
      acceptedAnswer: {
        '@type': 'Answer',
        text: '非常快速简单！购买卡密后，按照教程操作通常在1分钟内即可完成充值。我们提供详细的图文教程，即使是第一次操作也能轻松完成。24/7自动处理，随时购买随时充值。',
      },
    },
    {
      '@type': 'Question',
      name: '如果充值失败会怎么样？',
      acceptedAnswer: {
        '@type': 'Answer',
        text: '请放心！如果遇到充值失败的情况，我们承诺100%当天退款，无需复杂流程。同时，我们已稳定运营2年，充值成功率极高。如有任何问题，联系客服QQ：2316149029，我们会第一时间处理。',
      },
    },
    {
      '@type': 'Question',
      name: '充值后会不会被封号？如果封号怎么办？',
      acceptedAnswer: {
        '@type': 'Answer',
        text: '我们采用正规Apple官方充值渠道，与直接在ChatGPT官网订阅完全一致，不存在违规操作，正常使用不会被封号。万一因为充值问题导致封号（极少发生），我们提供封号退款保障，保护您的权益。',
      },
    },
    {
      '@type': 'Question',
      name: '可以开发票吗？',
      acceptedAnswer: {
        '@type': 'Answer',
        text: '可以开具发票。如需发票，请在购买后联系客服QQ：2316149029，提供相关开票信息（公司名称、税号等），我们会为您办理发票开具事宜。',
      },
    },
    {
      '@type': 'Question',
      name: '如何选择ChatGPT Plus充值还是镜像服务？',
      acceptedAnswer: {
        '@type': 'Answer',
        text: '深度使用ChatGPT且有网络条件的用户建议选择ChatGPT Plus充值服务，享受完整的官方功能；无网络条件或中度使用ChatGPT的用户可选择镜像服务，性价比更高，国内可直连使用，功能体验与官网一致。',
      },
    },
  ],
};

// WebSite Schema - 网站信息
const websiteSchema = {
  '@context': 'https://schema.org',
  '@type': 'WebSite',
  name: 'ChatGPT 一站式服务',
  url: siteUrl,
  description: '专业的ChatGPT Plus代充和镜像服务提供商',
  potentialAction: {
    '@type': 'SearchAction',
    target: {
      '@type': 'EntryPoint',
      urlTemplate: `${siteUrl}?s={search_term_string}`,
    },
    'query-input': 'required name=search_term_string',
  },
};

// 根据type参数决定输出哪些schema
const schemas: Array<Record<string, unknown>> = [];
if (type === 'product' || type === 'all') {
  schemas.push(productSchema);
}
if (type === 'faq' || type === 'all') {
  schemas.push(faqSchema);
}
if (type === 'all') {
  schemas.push(websiteSchema);
}
---

{
  schemas.map((schema) => (
    <script type="application/ld+json" is:inline set:html={JSON.stringify(schema)} />
  ))
}
